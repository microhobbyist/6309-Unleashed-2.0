LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 1

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sat Nov 22 21:35:29 2025

  1:Name     CPUSpeedSel ;
  2:PartNo   ATF750CL ;
  3:Date     2025/11/22 ;
  4:Revision 14 ;
  5:Designer Frederic Segard ;
  6:Company  MicroHobbyist ;
  7:Assembly None ;
  8:Location None ;
  9:Device   v750c ;
 10:
 11:/* INPUTS */
 12:PIN  1 =  CLK4x ;    /* 16 MHz system oscillator */
 13:PIN  2 =  E ;        /* CPU E (from 6309) */
 14:PIN  3 =  RW ;       /* 1=read, 0=write */
 15:PIN  4 = !RESET ;    /* Active-low reset */
 16:PIN  5 =  MREQ ;     /* Memory Request */
 17:PIN  6 = !ROMdis ;   /* External ROM disable */
 18:PIN  7 = !SPDsel ;   /* Speed reg chip select (active low) */
 19:PIN  8 = !HALTin ;   /* External halt input (active low at pin) */
 20:PIN  9 = !PAUSEsw ;  /* Pause switch (active low at pin) */
 21:PIN 10 = !ROMaddr ;  /* Future expansion */
 22:PIN 11 =  RAMaddr ;  /* Future expansion */
 23:/*  12 =  GND */
 24:/*  13 =  GND ;      /* No connect - Grounded */
 25:
 26:/* DATA BUS (bidirectional) */
 27:PIN 15 =  D0 ;       /* Speed bit 0 */
 28:PIN 14 =  D1 ;       /* Speed bit 1 */
 29:
 30:/* OUTPUTS */
 31:PIN 23 =  CPUclk ;   /* EXTAL -> CPU */
 32:PIN 22 = !HALTout ;  /* HALT to CPU (active low) */
 33:PIN 21 =  LED_R ;
 34:PIN 20 =  LED_G ;
 35:PIN 19 =  LED_B ;
 36:PIN 18 =  RAMcs ;    /* Future expansion */
 37:PIN 17 =  ROMcs ;
 38:PIN 16 =  RAMoe ;
 39:/* 24 = VCC */
 40:
 41:/* BURIED NODES */
 42:PINNODE 25 = DIV2 ;
 43:PINNODE 26 = DIV4 ;
 44:PINNODE 27 = DIV8 ;
 45:PINNODE 31 = S0 ;
 46:PINNODE 32 = S1 ;
 47:PINNODE 33 = ROMdisFF ;
 48:
 49:/* =========================================================
 50:                 SHADOW ROM LOGIC
 51:   ========================================================= */
 52:
 53:ROMdisFF.d  = 'b'1 ;

LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 2

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sat Nov 22 21:35:29 2025

 54:ROMdisFF.ck = ROMdis ;
 55:ROMdisFF.ar = RESET ;
 56:ROMdisFF.sp = 'b'0 ;
 57:
 58:RD     = !(RW & E) ;
 59:ROMcs  =  MREQ #  ROMdisFF ;
 60:RAMoe  =  RD   # !ROMdisFF ;
 61:
 62:/* =========================================================
 63:                   SPEED REGISTER
 64:   ========================================================= */
 65:
 66:REG_WRITE = SPDsel & !RW ;
 67:
 68:/* DEFAULT: slow or normal will come from reset, not here */
 69:S1.d  = (REG_WRITE & D1) # (!REG_WRITE & S1) ;
 70:S0.d  = (REG_WRITE & D0) # (!REG_WRITE & S0) ;
 71:
 72:S1.ck = E ;
 73:S0.ck = E ;
 74:S1.ar = RESET ;  /* S1 clears on reset */
 75:S0.ar = RESET ;  /* S0 clears on reset (default slow until you write) */
 76:S1.sp = 'b'0 ;
 77:S0.sp = 'b'0 ;
 78:
 79:/* =========================================================
 80:                   CLOCK DIVIDERS
 81:   ========================================================= */
 82:
 83:/* All three flip-flops are clocked by CLK4x */
 84:
 85:DIV2.d  = !DIV2 ;                   /* toggles every clock -> /2 */
 86:DIV4.d  = DIV4 $ DIV2 ;             /* toggles when DIV2 wraps -> /4 */
 87:DIV8.d  = DIV8 $ (DIV2 & DIV4) ;    /* toggles when DIV4 & DIV2 are 1 -> /8 */
 88:
 89:DIV2.ck = CLK4x ;
 90:DIV4.ck = CLK4x ;
 91:DIV8.ck = CLK4x ;
 92:
 93:DIV2.ar = RESET ;
 94:DIV4.ar = RESET ;
 95:DIV8.ar = RESET ;
 96:
 97:DIV2.sp = 'b'0 ;
 98:DIV4.sp = 'b'0 ;
 99:DIV8.sp = 'b'0 ;
100:
101:/* =========================================================
102:                   SPEED MUX (CPU CLOCK)
103:   ========================================================= */
104:
105:SPD_TURBO  =  S1 &  S0 ;  /* 16 MHz */
106:SPD_FAST   =  S1 & !S0 ;  /* 8 MHz */
107:SPD_NORMAL = !S1 &  S0 ;  /* 4 MHz */

LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 3

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sat Nov 22 21:35:29 2025

108:SPD_SLOW   = !S1 & !S0 ;  /* 2 MHz */
109:
110:CPUclk = (SPD_TURBO  & CLK4x) #
111:         (SPD_FAST   & DIV2)  #
112:         (SPD_NORMAL & DIV4)  #
113:         (SPD_SLOW   & DIV8)  ;
114:
115:/* =========================================================
116:                      RGB LED OUTPUTS
117:   ========================================================= */
118:
119:LED_R = SPD_TURBO # SPD_FAST ;
120:LED_G = SPD_NORMAL # SPD_FAST ;
121:LED_B = SPD_SLOW ;
122:
123:/* =========================================================
124:                        HALT LOGIC
125:   ========================================================= */
126:/* Detect any change to the speed register (S1,S0) on a write */
127:
128:CHANGE_S1 = (REG_WRITE &  D1 & !S1) #
129:            (REG_WRITE & !D1 &  S1) ;
130:
131:CHANGE_S0 = (REG_WRITE &  D0 & !S0) #
132:            (REG_WRITE & !D0 &  S0) ;
133:
134:CHANGE      = CHANGE_S1 # CHANGE_S0 ;
135:HALT_ACTIVE = CHANGE    & REG_WRITE ;
136:
137:/* ---------------- EXTENDED STRETCH FOR SPEED CHANGE ------ */
138:/* Shift a "1" through H0..H3 to keep HALTout asserted       */
139:/* for several CLK4x cycles after a speed change.            */
140:
141:PINNODE 28 = H0 ;
142:PINNODE 29 = H1 ;
143:PINNODE 30 = H2 ;
144:PINNODE 34 = H3 ;
145:
146:H0.d  = HALT_ACTIVE ;
147:H1.d  = H0 ;
148:H2.d  = H1 ;
149:H3.d  = H2 ;
150:
151:H0.ck = CLK4x ;
152:H1.ck = CLK4x ;
153:H2.ck = CLK4x ;
154:H3.ck = CLK4x ;
155:
156:H0.ar = RESET ;
157:H1.ar = RESET ;
158:H2.ar = RESET ;
159:H3.ar = RESET ;
160:
161:H0.sp = 'b'0 ;

LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 4

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sat Nov 22 21:35:29 2025

162:H1.sp = 'b'0 ;
163:H2.sp = 'b'0 ;
164:H3.sp = 'b'0 ;
165:
166:/* Stretched speed-change halt:
167:   - HALT_ACTIVE itself
168:   - plus 4 extra CLK4x stages via H0..H3
169:   This gives up to 5 CLK4x cycles of /HALT assertion
170:   per speed change event.
171:*/
172:HALT_SPEED_STRETCHED = HALT_ACTIVE # H0 # H1 # H2 # H3 ;
173:
174:/* Final HALT request:
175:   - External halts (HALTin) are level-sensitive.
176:   - Pause switch is level-sensitive.
177:   - Speed-change halt is stretched as above.
178:   Note: internal HALTout=1 -> external pin !HALTout is LOW.
179:*/
180:HALTout = HALTin # PAUSEsw # HALT_SPEED_STRETCHED ;
181:
182:/* =========================================================
183:                     TRI-STATE READBACK LOGIC
184:   ========================================================= */
185:
186:REG_READ = SPDsel & RW ;
187:
188:D1    = REG_READ & S1 ;
189:D1.oe = REG_READ ;
190:
191:D0    = REG_READ & S0 ;
192:D0.oe = REG_READ ;
193:
194:



Jedec Fuse Checksum       (f41e)
Jedec Transmit Checksum   (e845)
