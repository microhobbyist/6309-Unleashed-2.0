LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 1

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sun Nov 16 21:42:17 2025

  1:Name     CPUSpeedSel ;
  2:PartNo   ATF750CL ;
  3:Date     2025/11/16 ;
  4:Revision 11 ;
  5:Designer Frederic Segard ;
  6:Company  MicroHobbyist ;
  7:Assembly None ;
  8:Location None ;
  9:Device   v750c ;
 10:
 11:/* =========================================================
 12:   Compiler Options
 13:   ---------------------------------------------------------
 14:   cupl -m2lxfjanb -u C:\Wincupl\Shared\Atmel.DL %1.PLD
 15:   ========================================================= */
 16:
 17:/********************************************************************
 18: *  6309 CLOCK MUX (4 SPEEDS out of one 16MHz clock)
 19: *  SPEEDS:
 20: *    16 MHz : E = 4MHz  (Turbo) 
 21: *     8 MHz : E = 2MHz  (Fast)
 22: *     4 MHz : E = 1MHz  (Normal)
 23: *     2 MHz : E = .5MHz (Slow)
 24: *
 25: *  RGB LEDs, PSG clock at 8 MHz, Shadow ROM logic, HALT logic,
 26: *  Readback of speed register.
 27: *
 28: *  DEFAULT SPEED = NORMAL = 4 MHz (S1=0, S0=1)
 29: ********************************************************************/
 30:
 31:/* INPUTS */
 32:PIN  1 =  CLK_16M ;     /* 16 MHz system oscillator */
 33:PIN  2 =  E ;           /* CPU E (from 6309) */
 34:PIN  3 =  RW ;          /* 1=read, 0=write */
 35:PIN  4 = !RESET ;       /* Active-low reset */
 36:PIN  5 =  MREQ ;        /* Memory Request */
 37:PIN  6 = !SPDsel ;      /* Speed reg chip select (active low) */
 38:PIN  7 =  RAMaddr ;
 39:PIN  8 = !ROMaddr ;
 40:PIN  9 = !ROMdis ;      /* External ROM disable */
 41:PIN 10 = !HALT_IN1 ;    /* External halt input 1 */
 42:PIN 11 = !HALT_IN2 ;    /* External halt input 2 */
 43:/* 12 = GND */
 44:PIN 13 = !PAUSE_SW ;    /* Pause switch (active low) */
 45:
 46:/* DATA BUS (bidirectional) */
 47:PIN 14 =  D1 ;          /* Speed bit 1 */
 48:PIN 15 =  D0 ;          /* Speed bit 0 */
 49:
 50:/* OUTPUTS */
 51:PIN 23 =  CPU_CLK ;     /* EXTAL -> CPU */
 52:PIN 22 = !HALT_OUT ;    /* HALT to CPU (active low) */
 53:PIN 21 =  PSG_CLK ;     /* 8 MHz clock */

LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 2

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sun Nov 16 21:42:17 2025

 54:PIN 20 =  LED_R ;
 55:PIN 19 =  LED_G ;
 56:PIN 18 =  LED_B ;
 57:PIN 17 = !ROMcs ;
 58:PIN 16 = !RAMoe ;
 59:/* 24 = VCC */
 60:
 61:/* BURIED NODES */
 62:PINNODE 25 = DIV2 ;     /* 8 MHz */
 63:PINNODE 26 = DIV4 ;     /* 4 MHz */
 64:PINNODE 27 = DIV8 ;     /* 2 MHz */
 65:PINNODE 31 = S0 ;
 66:PINNODE 32 = S1 ;
 67:PINNODE 33 = ROMdisQ ;
 68:
 69:/* =========================================================
 70:                 SHADOW ROM LOGIC
 71:   ========================================================= */
 72:
 73:ROMdisQ.d  = 'b'1 ;
 74:ROMdisQ.ck = ROMdis ;
 75:ROMdisQ.ar = !RESET ;
 76:ROMdisQ.sp = 'b'0 ;
 77:
 78:RD     = !(RW & E) ;
 79:ROMcs  = MREQ # ROMdisQ ;
 80:RAMoe  = RD # !ROMdisQ ;
 81:
 82:/* =========================================================
 83:                   SPEED REGISTER
 84:   ========================================================= */
 85:
 86:REG_WRITE = !SPDsel & !RW ;
 87:
 88:/* DEFAULT = NORMAL = 4 MHz -> S1=0, S0=1 */
 89:S1.d  = REG_WRITE & D1 # !REG_WRITE & 'b'0 ;
 90:S0.d  = REG_WRITE & D0 # !REG_WRITE & 'b'1 ;
 91:
 92:S1.ar = !RESET ;
 93:S0.ar = !RESET ;
 94:S1.sp = 'b'0 ;
 95:S0.sp = 'b'0 ;
 96:
 97:/* =========================================================
 98:                   CLOCK DIVIDERS
 99:   ========================================================= */
100:
101:/* Divide-by-2: 16 -> 8 MHz */
102:DIV2.d  = DIV2 $ CLK_16M ;
103:DIV2.ck = CLK_16M ;
104:DIV2.ar = !RESET ;
105:DIV2.sp = 'b'0 ;
106:
107:/* Divide-by-4: 8 -> 4 MHz */

LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 3

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sun Nov 16 21:42:17 2025

108:DIV4.d  = DIV4 $ DIV2 ;
109:DIV4.ck = DIV2 ;
110:DIV4.ar = !RESET ;
111:DIV4.sp = 'b'0 ;
112:
113:/* Divide-by-8: 4 -> 2 MHz */
114:DIV8.d  = DIV8 $ DIV4 ;
115:DIV8.ck = DIV4 ;
116:DIV8.ar = !RESET ;
117:DIV8.sp = 'b'0 ;
118:
119:/* =========================================================
120:                   SPEED MUX (CPU CLOCK)
121:   ---------------------------------------------------------
122:   S1 S0 | SPEED     | CPU_CLK
123:   ------+-----------+----------
124:    1  1 | TURBO     | 16 MHz
125:    1  0 | FAST      |  8 MHz
126:    0  1 | NORMAL    |  4 MHz
127:    0  0 | SLOW      |  2 MHz
128:   ========================================================= */
129:
130:SPD_TURBO  = S1 & S0 ;
131:SPD_FAST   = S1 & !S0 ;
132:SPD_NORMAL = !S1 & S0 ;
133:SPD_SLOW   = !S1 & !S0 ;
134:
135:CPU_CLK = (SPD_TURBO  & CLK_16M) #
136:          (SPD_FAST   & DIV2)    #
137:          (SPD_NORMAL & DIV4)    #
138:          (SPD_SLOW   & DIV8)    ;
139:
140:/* =========================================================
141:                      RGB LED OUTPUTS
142:   ========================================================= */
143:
144:LED_R = SPD_TURBO # SPD_FAST ;
145:LED_G = SPD_NORMAL # SPD_FAST # SPD_SLOW ;
146:LED_B = SPD_SLOW ;
147:
148:/* =========================================================
149:                        HALT LOGIC
150:   ========================================================= */
151:
152:CHANGE_S1 = (REG_WRITE & D1 & !S1) #
153:            (REG_WRITE & !D1 & S1) ;
154:
155:CHANGE_S0 = (REG_WRITE & D0 & !S0) #
156:            (REG_WRITE & !D0 & S0) ;
157:
158:CHANGE = CHANGE_S1 # CHANGE_S0 ;
159:HALT_ACTIVE = CHANGE & REG_WRITE ;
160:
161:!HALT_OUT = !HALT_IN1 #

LISTING FOR LOGIC DESCRIPTION FILE: CPUSpeedSel.pld                  Page 4

CUPL(WM): Universal Compiler for Programmable Logic
Version 5.0a Serial# MW-10400000
Copyright (c) 1983, 1998 Logical Devices, Inc.
Created Sun Nov 16 21:42:17 2025

162:            !HALT_IN2 #
163:            !PAUSE_SW #
164:            HALT_ACTIVE ;
165:
166:/* =========================================================
167:                     READBACK LOGIC
168:   ========================================================= */
169:
170:D1 = (!SPDsel & RW) & S1 # (SPDsel # !RW) & 'b'0 ;
171:D0 = (!SPDsel & RW) & S0 # (SPDsel # !RW) & 'b'0 ;
172:
173:/* =========================================================
174:                       PSG CLOCK
175:   ========================================================= */
176:
177:PSG_CLK = DIV2 ;
178:
179:/* END OF FILE */
180:
181:



Jedec Fuse Checksum       (27f5)
Jedec Transmit Checksum   (3b61)
